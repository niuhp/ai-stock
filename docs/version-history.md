# AI Stock 项目版本历史

## v2.1 (2025-11-19) - 当前版本

### 📋 版本说明
**定位调整**: 从"ETF专用系统" → "通用量化系统，一期ETF"

### 🎯 设计理念
- **框架**: 支持全A股标的（股票、ETF、可转债、期权等）
- **实施**: 分期推进，一期专注ETF
- **原则**: 高内聚、低耦合、易扩展

### ✅ 核心改进

#### 1. 架构通用化
**数据模型**:
- `tb_security_info` - 统一标的信息表（支持所有类型）
- `tb_etf_extra` / `tb_stock_extra` - 按类型扩展（一对一）
- 核心表通用，扩展表隔离

**代码设计**:
```java
// 抽象基类
Security (抽象类)
  ├── ETF (一期实现)
  ├── Stock (二期)
  └── Bond (三期)

// 策略接口
DataCollector (接口)
  ├── ETFDataCollector (一期)
  └── StockDataCollector (二期)
```

#### 2. 功能模块化

| 模块 | 通用设计 | 一期实现 | 扩展性 |
|-----|---------|---------|-------|
| 数据采集 | ✅ | ETF | ⭐⭐⭐⭐⭐ |
| 策略框架 | ✅ | 通用+ETF | ⭐⭐⭐⭐⭐ |
| 回测引擎 | ✅ | 标的无关 | ⭐⭐⭐⭐⭐ |
| 账户管理 | ✅ | 多标的支持 | ⭐⭐⭐⭐⭐ |
| 监控预警 | ✅ | 通用 | ⭐⭐⭐⭐⭐ |

#### 3. 分期实施

**一期（16周）- ETF量化**:
- ✅ 建立通用架构
- ✅ 实现ETF数据采集
- ✅ ETF策略与回测
- ✅ 账户与交易管理

**二期（8-10周）- 个股扩展**:
- 新增个股数据采集
- 新增个股策略模板
- 新增财务分析模块
- **核心框架无需修改**

**三期（按需）- 高级功能**:
- 可转债、期权
- 跨市场套利
- AI/ML策略

### 📄 文档更新

#### 新增文档
- ✅ `design-principles.md` - 设计原则详解
- ✅ `version-history.md` - 版本历史记录

#### 更新文档
- ✅ `README.md` - 明确框架支持全市场，一期ETF
- ✅ `requirements.md` - 通用功能需求，分期实施
- ✅ `architecture.md` - 通用架构设计，扩展性强化

### 🔑 关键设计点

1. **标的类型抽象**
   - 使用模板方法模式 + 策略模式
   - 85%共性 + 15%特性
   - 通过接口隔离扩展数据

2. **数据模型分离**
   - 核心表：所有标的共用
   - 扩展表：按类型一对一关联
   - 遵循开闭原则

3. **策略框架通用**
   - BaseStrategy适用所有标的
   - 策略注册机制
   - 标的类型过滤

4. **回测引擎无关**
   - 不依赖具体标的类型
   - 数据驱动设计
   - 统一回测报告

### 📊 扩展性验证

**新增标的类型的成本**:
| 工作项 | 工作量 | 影响范围 |
|-------|--------|---------|
| 数据表 | 1-2张表 | 新增 |
| 数据采集 | 1个Collector类 | 新增 |
| 业务逻辑 | 1-2个Service类 | 新增 |
| API接口 | 若干REST接口 | 新增 |
| **核心模块** | **无需修改** | ✅ |

**预计工作量**: 2-3周（新标的类型）

---

## v2.0 (2025-11-19)

### 📋 版本说明
**首次定位**: ETF量化交易系统

### ✅ 完成内容
- 项目初始化
- ETF专用需求文档
- ETF专用架构设计
- 基础README

### ❌ 问题
- 架构过于专用，扩展性不足
- 后续增加个股需要大量改动

**决定**: 调整为v2.1通用架构

---

## v1.0 (2025-11-14)

### 📋 版本说明
**初始定位**: A股智能分析系统

### ✅ 完成内容
- 全市场股票分析需求
- AI驱动的技术+基本面分析
- 买卖点推荐系统

### ❌ 问题
- 范围过大，难以快速落地
- AI分析需要大量数据和训练

**决定**: 调整为量化交易，先做ETF

---

## 版本对比

| 版本 | 定位 | 标的范围 | 架构特点 | 实施策略 |
|-----|------|---------|---------|---------|
| v1.0 | A股分析系统 | 全市场股票 | AI分析 | 一次性开发 |
| v2.0 | ETF量化系统 | 仅ETF | ETF专用 | ETF focused |
| **v2.1** | **通用量化系统** | **全市场（分期）** | **通用+扩展** | **分期迭代** |

---

## 下一步计划

### 近期（1-2周）
- [ ] 完成数据模型的详细设计
- [ ] 编写核心接口定义
- [ ] 搭建项目脚手架

### 中期（1个月）
- [ ] 实现ETF数据采集
- [ ] 实现基础策略框架
- [ ] 完成回测引擎原型

### 长期（3-6个月）
- [ ] 完成一期ETF系统
- [ ] 启动二期个股扩展
- [ ] 持续优化和迭代

---

**文档维护**: 每次重大调整更新此文档  
**版本规则**: 主版本.次版本 (major.minor)  
**状态**: 活跃开发中

